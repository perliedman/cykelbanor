#!/usr/bin/node

var query_overpass = require('query-overpass'),
    fs = require('fs'),
    swedenPoly =
      '68.90611 20.99723 ' +
      '68.77466 21.37536 ' +
      '68.65488 21.66026 ' +
      '68.61090 21.82766 ' +
      '68.54800 21.99827 ' +
      '68.49200 22.07071 ' +
      '68.48451 22.34374 ' +
      '68.46931 22.42268 ' +
      '68.43744 22.63745 ' +
      '68.39324 22.82400 ' +
      '68.30594 23.07832 ' +
      '68.25032 23.16856 ' +
      '68.14020 23.16539 ' +
      '68.16558 23.28396 ' +
      '67.96185 23.66261 ' +
      '67.92766 23.67003 ' +
      '67.83810 23.50636 ' +
      '67.62115 23.56925 ' +
      '67.57867 23.55201 ' +
      '67.53980 23.49867 ' +
      '67.46668 23.44102 ' +
      '67.46800 23.54136 ' +
      '67.45264 23.69802 ' +
      '67.43194 23.77847 ' +
      '67.38808 23.76250 ' +
      '67.29068 23.80503 ' +
      '67.26062 23.60401 ' +
      '67.22308 23.58425 ' +
      '67.20473 23.62036 ' +
      '67.15048 23.60440 ' +
      '66.96507 23.85898 ' +
      '66.81062 24.02198 ' +
      '66.73056 23.91828 ' +
      '66.57289 23.88902 ' +
      '66.49387 23.78011 ' +
      '66.44889 23.66261 ' +
      '66.39019 23.70219 ' +
      '66.28900 23.67155 ' +
      '66.19912 23.73913 ' +
      '66.16560 23.92819 ' +
      '65.87813 24.16040 ' +
      '65.42625 24.22472 ' +
      '63.62823 21.48912 ' +
      '62.40695 18.33261 ' +
      '61.21385 18.64892 ' +
      '59.30445 20.29057 ' +
      '56.40389 19.34739 ' +
      '55.70711 15.80272 ' +
      '55.54972 14.83895 ' +
      '55.02652 14.18163 ' +
      '55.14805 12.68609 ' +
      '55.43913 12.56733 ' +
      '55.61814 12.83745 ' +
      '55.92790 12.62883 ' +
      '56.04172 12.63671 ' +
      '56.28902 12.07553 ' +
      '56.59314 11.99694 ' +
      '57.34370 11.45307 ' +
      '58.01766 10.84947 ' +
      '58.64647 10.54138 ' +
      '58.89549 10.59630 ' +
      '59.00332 11.10006 ' +
      '59.07594 11.12722 ' +
      '59.12465 11.34541 ' +
      '58.99633 11.47149 ' +
      '58.89086 11.51765 ' +
      '58.91865 11.64553 ' +
      '59.22278 11.77609 ' +
      '59.24227 11.81753 ' +
      '59.59043 11.67308 ' +
      '59.61975 11.69368 ' +
      '59.64537 11.75748 ' +
      '59.65620 11.85207 ' +
      '59.69586 11.88040 ' +
      '59.70338 11.91820 ' +
      '59.78554 11.91317 ' +
      '59.84174 11.82502 ' +
      '59.87131 11.86997 ' +
      '59.90493 11.96582 ' +
      '59.89831 12.16198 ' +
      '60.04039 12.43211 ' +
      '60.18309 12.52707 ' +
      '60.32410 12.48558 ' +
      '60.40606 12.59694 ' +
      '60.51519 12.59238 ' +
      '60.73266 12.37744 ' +
      '61.01839 12.20887 ' +
      '61.05773 12.44183 ' +
      '61.06325 12.66631 ' +
      '61.14284 12.69371 ' +
      '61.20371 12.78201 ' +
      '61.35287 12.85601 ' +
      '61.56156 12.56342 ' +
      '61.55795 12.40694 ' +
      '61.71724 12.12931 ' +
      '62.26541 12.28352 ' +
      '62.59062 12.03383 ' +
      '62.74905 12.12550 ' +
      '62.89165 12.06311 ' +
      '63.01463 12.20289 ' +
      '63.27109 11.96538 ' +
      '63.48351 12.21496 ' +
      '63.59637 12.13690 ' +
      '63.97583 12.67361 ' +
      '64.06150 12.91984 ' +
      '64.10041 13.21444 ' +
      '64.02268 13.96910 ' +
      '64.19230 14.13239 ' +
      '64.47002 14.09110 ' +
      '64.50576 13.86085 ' +
      '64.57747 13.60512 ' +
      '65.12023 14.30968 ' +
      '65.25224 14.36491 ' +
      '65.31386 14.49005 ' +
      '65.50993 14.48281 ' +
      '65.68216 14.51651 ' +
      '65.81619 14.60283 ' +
      '66.13400 14.50843 ' +
      '66.28222 15.46665 ' +
      '66.48074 15.34654 ' +
      '66.95240 16.08563 ' +
      '67.03830 16.34993 ' +
      '67.22211 16.35523 ' +
      '67.43526 16.07628 ' +
      '67.52233 16.13964 ' +
      '67.53718 16.40010 ' +
      '67.90440 16.71541 ' +
      '68.12403 17.27158 ' +
      '68.05725 17.62699 ' +
      '67.97515 17.89515 ' +
      '68.19914 18.13626 ' +
      '68.40349 18.08154 ' +
      '68.53925 18.11090 ' +
      '68.60024 18.47577 ' +
      '68.36476 19.91367 ' +
      '68.48748 20.18825 ' +
      '68.55583 19.92323 ' +
      '68.80309 20.32377 ' +
      '68.92302 20.29728 ' +
      '69.04928 20.04352 ' +
      '69.06643 20.54963 ' +
      '69.05090 20.74922 ' +
      '68.97137 20.92666 ' +
      '68.94473 20.90445 ' +
      '68.91447 20.90190 ' +
      '68.90611 20.09723';

var query =     '[out:json][timeout:25];' +
    '(' +
    '  node["amenity"="bicycle_rental"](poly:"' + swedenPoly + '");' +
    ');' +
    'out;'

query_overpass(query, function(error, data) {
        if (error) {
            console.error('Failed:', error, 'query was:', query);
        } else {
            fs.writeFileSync('assets/data/bicycle-rental.json', JSON.stringify(data));
        }
    });

